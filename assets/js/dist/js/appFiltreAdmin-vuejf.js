import{r as u,o as w,f as y,a as s,c as n,w as b,v as g,b as e,F as h,d as m,e as F,t as v,g as I,h as x,i as k,j as A,k as C}from"../assets/filtre-service.5e385e4c.js";const N={class:"grid columns-2 place-items-center grid-flow-col"},R=e("option",{disabled:"",value:""},"S\xE9lectionnez une cat\xE9gorie",-1),S=["value"],B=e("option",{disabled:"",value:""},"S\xE9lectionnez une sous cat\xE9gorie",-1),E=["value"],V=e("br",null,null,-1),q=e("br",null,null,-1),D={props:{categoryId:Number},emits:["refresh-filtres"],setup(d,{emit:r}){const o=d,t=u(null),a=u(null),c=u([]),_=u([]);async function f(){let i=await y(t.value);_.value=[...i.data]}async function $(){try{await F(o.categoryId,t.value,a.value),r("refresh-filtres")}catch(i){console.log(i)}return null}return w(async()=>{let i=await y(0);c.value=[...i.data]}),(i,p)=>(s(),n("div",N,[b(e("select",{"onUpdate:modelValue":p[0]||(p[0]=l=>t.value=l),onChange:f},[R,(s(!0),n(h,null,m(c.value,l=>(s(),n("option",{value:l.id},v(l.nom),9,S))),256))],544),[[g,t.value]]),b(e("select",{"onUpdate:modelValue":p[1]||(p[1]=l=>a.value=l)},[B,(s(!0),n(h,null,m(_.value,l=>(s(),n("option",{value:l.id},v(l.nom),9,E))),256))],512),[[g,a.value]]),e("div",null,[V,q,e("button",{class:"button button-primary",type:"button",onClick:$}," Ajouter ")])]))}},j={class:"wp-list-table widefat fixed striped table-view-list toplevel_page_pivot_list"},z=e("thead",null,[e("tr",null,[e("th",{scope:"col",id:"booktitle",class:"manage-column column-booktitle column-primary"},"Nom"),e("th",{scope:"col",id:"booktitle",class:"manage-column column-booktitle column-primary"},"Supprimer ")])],-1),L={class:"ooktitle column-booktitle has-row-actions column-primary"},M=["onClick"],T=e("span",{class:"dashicons dashicons-trash"},null,-1),U=x("DELETE "),P=[T,U],G=e("br",null,null,-1),H={props:{filtres:Array,categoryId:Number},emits:["refresh-filtres"],setup(d,{emit:r}){const o=d;async function t(a){await I(o.categoryId,a),r("refresh-filtres")}return(a,c)=>(s(),n(h,null,[e("table",j,[z,e("tbody",null,[(s(!0),n(h,null,m(d.filtres,_=>(s(),n("tr",null,[e("td",L,v(_.nom),1),e("td",null,[e("button",{class:"button button-danger",type:"button",onClick:f=>t(_.id)},P,8,M)])]))),256))])]),G],64))}};const J={class:"myDiv"},K=e("h3",null,"Ajouter",-1),O=e("hr",null,null,-1),Q={setup(d){const r=u([]),o=u(0),t=async function(){if(o.value>0){console.log("back");let c=await A("",o.value);r.value=[...c.data]}};return w(async()=>{o.value=Number(document.getElementById("filtres-box").getAttribute("data-category-id")),await t()}),(a,c)=>(s(),n("div",J,[K,O,k(H,{categoryId:o.value,filtres:r.value,onRefreshFiltres:t},null,8,["categoryId","filtres"]),k(D,{categoryId:o.value,onRefreshFiltres:t},null,8,["categoryId"])]))}};C(Q).mount("#filtres-box");
