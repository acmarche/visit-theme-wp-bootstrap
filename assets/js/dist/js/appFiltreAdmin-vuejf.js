import{o as u,c as d,w as g,v as y,a as e,F as p,r as v,t as h,d as x,b as k,e as _,f as w,g as I,h as b,i as F,u as A,j as C,k as $,l as R,m as N,n as B}from"../assets/filtre-service.9a68d5a3.js";const U=e("p",{class:"mt-3"},"Aucun filtre",-1),E=[U],P={class:"mt-4 wp-list-table widefat striped table-view-list toplevel_page_pivot_list"},S=e("thead",null,[e("tr",null,[e("th",{scope:"col",class:"manage-column column-booktitle column-primary"},"Nom"),e("th",{scope:"col",class:"manage-column column-booktitle column-primary"},"Urn"),e("th",{scope:"col",class:"manage-column column-booktitle column-primary"},"Enfants"),e("th",{scope:"col",class:"manage-column column-booktitle column-primary"},"Supprimer ")])],-1),V={class:"ooktitle column-booktitle has-row-actions column-primary"},M={class:"ooktitle column-booktitle has-row-actions column-primary"},T={class:"ooktitle column-booktitle has-row-actions column-primary"},q=["onClick"],j=e("span",{class:"dashicons dashicons-trash"},null,-1),D=k(" SUPPRIMER "),L=[j,D],z={__name:"ListFiltre",props:{filtres:Array,categoryId:Number},emits:["refresh-filtres"],setup(a,{emit:r}){const o=a;async function t(s){await x(o.categoryId,s),r("refresh-filtres")}return(s,m)=>(u(),d(p,null,[g(e("div",null,E,512),[[y,a.filtres.length===0]]),g(e("table",P,[S,e("tbody",null,[(u(!0),d(p,null,v(a.filtres,i=>(u(),d("tr",null,[e("td",V,h(i.nom),1),e("td",M,h(i.urn),1),e("td",T,h(i.withChildren),1),e("td",null,[e("button",{class:"button button-danger",type:"button",onClick:c=>t(i.id)},L,8,q)])]))),256))])],512),[[y,a.filtres.length>0]])],64))}},G={class:"divide-y divide-gray-200 overflow-hidden"},H=["value","onClick"],J={class:"text-gray-400"},K={__name:"Autocomplete",emits:["update-post"],setup(a,{emit:r}){const o=_([]),t=_("");async function s(){let c=await I(t.value);o.value=[...c.data]}function m(){s()}function i(c){t.value=c.nom,o.value=[],r("update-post",c)}return(c,n)=>(u(),d(p,null,[g(e("input",{type:"search",name:"typeOffre","onUpdate:modelValue":n[0]||(n[0]=l=>t.value=l),onInput:m,class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,544),[[w,t.value]]),e("ul",G,[(u(!0),d(p,null,v(o.value,l=>(u(),d("li",{key:l.id,value:l,onClick:f=>i(l),style:{cursor:"pointer"},class:"hover:bg-gray-50 px-2 py-2 text-green-700"},[k(h(l.nom)+" ",1),e("span",J,"("+h(l.urn)+")",1)],8,H))),128))])],64))}},Q={class:"bg-white2 px-6 pt-10 pb-8 shadow-xl ring-1 ring-gray-900/5"},W={class:"ml-6 w-60"},X=e("label",{for:"children",class:"text-sm font-medium text-gray-700 mr-2"},"Avec les enfants",-1),Y={__name:"AddFilter",props:{categoryId:Number},emits:["refresh-filtres"],setup(a,{emit:r}){const o=a;let t=0,s=!1;const m=_(null);async function i(){if(t>0){try{await $(o.categoryId,t,s),r("refresh-filtres"),m.value="oki"}catch(n){m.value="Error! Could not reach the API. "+n,console.log(n)}return null}else console.log("Pas de selection")}function c(n){console.log("update"+n.id),t=n.id}return(n,l)=>(u(),d("div",Q,[e("table",null,[e("tr",null,[e("td",null,[b(K,{onUpdatePost:c})]),e("td",null,[e("div",W,[X,g(e("input",{type:"checkbox",name:"children",id:"children","onUpdate:modelValue":l[0]||(l[0]=f=>C(s)?s.value=f:s=f)},null,512),[[F,A(s)]])])])])]),e("button",{onClick:l[1]||(l[1]=f=>i()),name:"add",type:"button",id:"addReference",class:"flex ml-auto mt-3 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"}," Ajouter ")]))}},Z={__name:"AppAdmin",setup(a){const r=_([]),o=_(0);async function t(){if(o.value>0){let s=await N("",o.value,1,0);r.value=[...s.data]}}return R(async()=>{o.value=Number(document.getElementById("filtres-box").getAttribute("data-category-id")),await t()}),(s,m)=>(u(),d(p,null,[b(Y,{categoryId:o.value,onRefreshFiltres:t},null,8,["categoryId"]),b(z,{categoryId:o.value,filtres:r.value,onRefreshFiltres:t},null,8,["categoryId","filtres"])],64))}};B(Z).mount("#filtres-box");
