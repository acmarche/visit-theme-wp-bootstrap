import{o as d,c as m,w as g,v,a as e,F as _,r as k,t as h,d as x,b as y,e as p,f as w,g as I,h as b,i as F,u as A,j as C,k as $,l as R,m as N,n as B}from"../assets/filtre-service.a43f355f.js";const U=e("p",{class:"mt-3"},"Aucun filtre",-1),E=[U],P={class:"mt-4 wp-list-table widefat striped table-view-list toplevel_page_pivot_list"},S=e("thead",null,[e("tr",null,[e("th",{scope:"col",class:"manage-column column-booktitle column-primary"},"Nom"),e("th",{scope:"col",class:"manage-column column-booktitle column-primary"},"Urn"),e("th",{scope:"col",class:"manage-column column-booktitle column-primary"},"Enfants"),e("th",{scope:"col",class:"manage-column column-booktitle column-primary"},"Supprimer ")])],-1),V={class:"ooktitle column-booktitle has-row-actions column-primary"},M={class:"ooktitle column-booktitle has-row-actions column-primary"},T={class:"ooktitle column-booktitle has-row-actions column-primary"},q=["onClick"],j=e("span",{class:"dashicons dashicons-trash"},null,-1),D=y(" SUPPRIMER "),L=[j,D],z={__name:"ListFiltre",props:{filtres:Array,categoryId:Number},emits:["refresh-filtres"],setup(r,{emit:c}){const o=r;async function s(t){await x(o.categoryId,t),c("refresh-filtres")}return(t,i)=>(d(),m(_,null,[g(e("div",null,E,512),[[v,r.filtres.length===0]]),g(e("table",P,[S,e("tbody",null,[(d(!0),m(_,null,k(r.filtres,n=>(d(),m("tr",null,[e("td",V,h(n.nom),1),e("td",M,h(n.urn),1),e("td",T,h(n.withChildren),1),e("td",null,[e("button",{class:"button button-danger",type:"button",onClick:u=>s(n.id)},L,8,q)])]))),256))])],512),[[v,r.filtres.length>0]])],64))}},G={class:"divide-y divide-gray-200 overflow-hidden"},H=["value","onClick"],J={class:"text-gray-400"},K={__name:"Autocomplete",emits:["update-post"],setup(r,{emit:c}){const o=p([]),s=p("");async function t(){let u=await I(s.value);o.value=[...u.data]}function i(){t()}function n(u){s.value=u.nom,o.value=[],c("update-post",u)}return(u,a)=>(d(),m(_,null,[g(e("input",{type:"search",name:"typeOffre","onUpdate:modelValue":a[0]||(a[0]=l=>s.value=l),onInput:i,class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,544),[[w,s.value]]),e("ul",G,[(d(!0),m(_,null,k(o.value,l=>(d(),m("li",{key:l.id,value:l,onClick:f=>n(l),style:{cursor:"pointer"},class:"hover:bg-gray-50 px-2 py-2 text-green-700"},[y(h(l.nom)+" ",1),e("span",J,"("+h(l.urn)+")",1)],8,H))),128))])],64))}},Q={class:"bg-white2 px-6 pt-10 pb-8 shadow-xl ring-1 ring-gray-900/5"},W={class:"ml-6 w-60"},X=e("label",{for:"children",class:"text-sm font-medium text-gray-700 mr-2"},"Avec les enfants",-1),Y={__name:"AddFilter",props:{categoryId:Number},emits:["refresh-filtres"],setup(r,{emit:c}){const o=r;let s=0,t=!1;const i=p(null);async function n(){if(s>0){try{await $(o.categoryId,s,t),c("refresh-filtres"),i.value="oki"}catch(a){i.value="Error! Could not reach the API. "+a,console.log(a)}return null}else console.log("Pas de selection")}function u(a){console.log("update"+a.id),s=a.id}return(a,l)=>(d(),m("div",Q,[e("table",null,[e("tr",null,[e("td",null,[b(K,{onUpdatePost:u})]),e("td",null,[e("div",W,[X,g(e("input",{type:"checkbox",name:"children",id:"children","onUpdate:modelValue":l[0]||(l[0]=f=>C(t)?t.value=f:t=f)},null,512),[[F,A(t)]])])])])]),e("button",{onClick:l[1]||(l[1]=f=>n()),name:"add",type:"button",id:"addReference",class:"flex ml-auto mt-3 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"}," Ajouter ")]))}},Z={__name:"AppAdmin",setup(r){const c=p([]),o=p(0),s=p("hello");async function t(){if(o.value>0){let i=await N("",o.value);c.value=[...i.data]}}return R(async()=>{o.value=Number(document.getElementById("filtres-box").getAttribute("data-category-id")),await t()}),(i,n)=>(d(),m(_,null,[y(h(s.value)+" ",1),b(Y,{categoryId:o.value,onRefreshFiltres:t},null,8,["categoryId"]),b(z,{categoryId:o.value,filtres:c.value,onRefreshFiltres:t},null,8,["categoryId","filtres"])],64))}};B(Z).mount("#filtres-box");
