import{r as u,o as w,f as y,a as n,c as a,w as b,v as g,b as e,F as h,d as m,e as F,t as v,g as I,h as x,i as k,j as A,k as C}from"../assets/filtre-service.1189cbf5.js";const N={class:"grid columns-2 place-items-center grid-flow-col"},R=e("option",{disabled:"",value:""},"S\xE9lectionnez une cat\xE9gorie",-1),S=["value"],B=e("option",{disabled:"",value:""},"S\xE9lectionnez une sous cat\xE9gorie",-1),E=["value"],V=e("br",null,null,-1),q=e("br",null,null,-1),D={props:{categoryId:Number},emits:["refresh-filtres"],setup(d,{emit:c}){const o=d,t=u(null),l=u(null),i=u([]),_=u([]);async function f(){let r=await y(t.value);_.value=[...r.data]}async function $(){try{let r=await F(o.categoryId,t.value,l.value);console.log(r.data),c("refresh-filtres")}catch(r){console.log(r)}return null}return w(async()=>{let r=await y(0);i.value=[...r.data]}),(r,p)=>(n(),a("div",N,[b(e("select",{"onUpdate:modelValue":p[0]||(p[0]=s=>t.value=s),onChange:f},[R,(n(!0),a(h,null,m(i.value,s=>(n(),a("option",{value:s.id},v(s.nom),9,S))),256))],544),[[g,t.value]]),b(e("select",{"onUpdate:modelValue":p[1]||(p[1]=s=>l.value=s)},[B,(n(!0),a(h,null,m(_.value,s=>(n(),a("option",{value:s.id},v(s.nom),9,E))),256))],512),[[g,l.value]]),e("div",null,[V,q,e("button",{class:"button button-primary",type:"button",onClick:$}," Ajouter ")])]))}},j={class:"wp-list-table widefat fixed striped table-view-list toplevel_page_pivot_list"},z=e("thead",null,[e("tr",null,[e("th",{scope:"col",id:"booktitle",class:"manage-column column-booktitle column-primary"},"Nom"),e("th",{scope:"col",id:"booktitle",class:"manage-column column-booktitle column-primary"},"Supprimer ")])],-1),L={class:"ooktitle column-booktitle has-row-actions column-primary"},M=["onClick"],T=e("span",{class:"dashicons dashicons-trash"},null,-1),U=x("DELETE "),P=[T,U],G=e("br",null,null,-1),H={props:{filtres:Array,categoryId:Number},emits:["refresh-filtres"],setup(d,{emit:c}){const o=d;async function t(l){console.log(l),await I(o.categoryId,l),c("refresh-filtres")}return(l,i)=>(n(),a(h,null,[e("table",j,[z,e("tbody",null,[(n(!0),a(h,null,m(d.filtres,_=>(n(),a("tr",null,[e("td",L,v(_.nom),1),e("td",null,[e("button",{class:"button button-danger",type:"button",onClick:f=>t(_.id)},P,8,M)])]))),256))])]),G],64))}};const J={class:"myDiv"},K=e("h3",null,"Ajouter",-1),O=e("hr",null,null,-1),Q={setup(d){const c=u([]),o=u(0),t=async function(){if(o.value>0){console.log("back");let i=await A("",o.value);c.value=[...i.data]}};return w(async()=>{o.value=Number(document.getElementById("filtres-box").getAttribute("data-category-id")),await t()}),(l,i)=>(n(),a("div",J,[K,O,k(H,{categoryId:o.value,filtres:c.value,onRefreshFiltres:t},null,8,["categoryId","filtres"]),k(D,{categoryId:o.value,onRefreshFiltres:t},null,8,["categoryId"])]))}};C(Q).mount("#filtres-box");
