import{o as c,c as d,w as v,v as b,a as e,F as g,r as k,t as p,d as x,b as y,e as h,f as w,g as I,h as f,i as $,u as F,j as A,k as C,l as R,m as N,n as B}from"../assets/filtre-service.625db213.js";const U=e("p",null,"Aucun filtre",-1),E=[U],M={class:"mt-4 wp-list-table widefat striped table-view-list toplevel_page_pivot_list"},P=e("thead",null,[e("tr",null,[e("th",{scope:"col",class:"manage-column column-booktitle column-primary"},"Nom"),e("th",{scope:"col",class:"manage-column column-booktitle column-primary"},"Urn"),e("th",{scope:"col",class:"manage-column column-booktitle column-primary"},"Enfants"),e("th",{scope:"col",class:"manage-column column-booktitle column-primary"},"Supprimer ")])],-1),S={class:"ooktitle column-booktitle has-row-actions column-primary"},V={class:"ooktitle column-booktitle has-row-actions column-primary"},T={class:"ooktitle column-booktitle has-row-actions column-primary"},q=["onClick"],j=e("span",{class:"dashicons dashicons-trash"},null,-1),D=y(" SUPPRIMER "),L=[j,D],z={__name:"ListFiltre",props:{filtres:Array,categoryId:Number},emits:["refresh-filtres"],setup(a,{emit:r}){const t=a;async function s(o){await x(t.categoryId,o),r("refresh-filtres")}return(o,m)=>(c(),d(g,null,[v(e("div",null,E,512),[[b,a.filtres.length===0]]),v(e("table",M,[P,e("tbody",null,[(c(!0),d(g,null,k(a.filtres,l=>(c(),d("tr",null,[e("td",S,p(l.nom),1),e("td",V,p(l.urn),1),e("td",T,p(l.withChildren),1),e("td",null,[e("button",{class:"button button-danger",type:"button",onClick:i=>s(l.id)},L,8,q)])]))),256))])],512),[[b,a.filtres.length>0]])],64))}},G={class:"divide-y divide-gray-200 overflow-hidden"},H=["value","onClick"],J={class:"text-gray-400"},K={__name:"Autocomplete",emits:["update-post"],setup(a,{emit:r}){const t=h([]),s=h("");async function o(){let i=await I(s.value);t.value=[...i.data]}function m(){o()}function l(i){s.value=i.nom,t.value=[],r("update-post",i)}return(i,u)=>(c(),d(g,null,[v(e("input",{type:"search",name:"typeOffre","onUpdate:modelValue":u[0]||(u[0]=n=>s.value=n),onInput:m,class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,544),[[w,s.value]]),e("ul",G,[(c(!0),d(g,null,k(t.value,n=>(c(),d("li",{key:n.id,value:n,onClick:_=>l(n),style:{cursor:"pointer"},class:"hover:bg-gray-50 px-2 py-2 text-green-700"},[y(p(n.nom)+" ",1),e("span",J,"("+p(n.urn)+")",1)],8,H))),128))])],64))}},Q={class:"bg-white2 px-6 pt-10 pb-8 shadow-xl ring-1 ring-gray-900/5"},W={class:"ml-6 w-60"},X=e("label",{for:"children",class:"text-sm font-medium text-gray-700 mr-2"},"Avec les enfants",-1),Y={__name:"AddFilter",props:{categoryId:Number},emits:["refresh-filtres"],setup(a,{emit:r}){const t=a;let s=0,o=!1;const m=h(null);async function l(){if(s>0){try{await C(t.categoryId,s,o),r("refresh-filtres"),m.value="oki"}catch(u){m.value="Error! Could not reach the API. "+u,console.log(u)}return null}else console.log("Pas de selection")}function i(u){console.log("update"+u.id),s=u.id}return(u,n)=>(c(),d("div",Q,[e("table",null,[e("tr",null,[e("td",null,[f(K,{onUpdatePost:i})]),e("td",null,[e("div",W,[X,v(e("input",{type:"checkbox",name:"children",id:"children","onUpdate:modelValue":n[0]||(n[0]=_=>A(o)?o.value=_:o=_)},null,512),[[$,F(o)]])])])])]),e("button",{onClick:n[1]||(n[1]=_=>l()),name:"add",type:"button",id:"addReference",class:"flex ml-auto mt-3 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"}," Ajouter ")]))}},Z=["value"],O={__name:"My",props:["message"],emits:["update:message"],setup(a){return(r,t)=>(c(),d("input",{value:a.message,onInput:t[0]||(t[0]=s=>r.$emit("update:message",s.target.value))},null,40,Z))}},ee={__name:"AppAdmin",setup(a){const r=h([]),t=h(0),s=h("hello");async function o(){if(t.value>0){let m=await N("",t.value);r.value=[...m.data]}}return R(async()=>{t.value=Number(document.getElementById("filtres-box").getAttribute("data-category-id")),await o()}),(m,l)=>(c(),d(g,null,[f(O,{message:s.value,"onUpdate:message":l[0]||(l[0]=i=>s.value=i)},null,8,["message"]),y(" "+p(s.value)+" ",1),f(Y,{categoryId:t.value,onRefreshFiltres:o},null,8,["categoryId"]),f(z,{categoryId:t.value,filtres:r.value,onRefreshFiltres:o},null,8,["categoryId","filtres"])],64))}};B(ee).mount("#filtres-box");
