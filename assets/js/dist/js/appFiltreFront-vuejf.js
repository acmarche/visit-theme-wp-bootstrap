import{r as i,a as l,c as a,b as o,w as v,v as w,F as m,d as x,t as g,l as k,n as $,u as b,m as h,p as j,q as z,o as B,i as y,j as I,s as C,k as N}from"../assets/filtre-service.cd4d9c85.js";const S={class:"d-md-none pr-12px border border-primary rounded-xs position-relative"},A=o("i",{class:"fas fa-angle-down position-absolute top-0 bottom-0 right-0 mr-16px fs-big-1 text-primary py-5px"},null,-1),L=["value"],O={class:"cat-filters d-md-flex mw-648px flex-wrap justify-content-center align-items-center d-none"},F={class:"mx-16px position-relative"},M=["id","onClick"],T={for:"cat-all",class:"py-4px px-8px fs-short-2 ff-semibold transition-color"},V={props:{filtres:Array,categoryId:Number,language:String},emits:["refresh-offres"],setup(p,{emit:e}){const n=p,r=i(0);function t(f){e("refresh-offres",f)}function d(){e("refresh-offres",filtreId)}return(f,u)=>(l(),a(m,null,[o("div",S,[A,v(o("select",{"onUpdate:modelValue":u[0]||(u[0]=s=>r.value=s),onChange:d,name:"categories",id:"cat-select",class:"fs-short-3 ff-semibold rounded-xs"},[(l(!0),a(m,null,x(n.filtres,s=>(l(),a("option",{value:s.id},g(s.nom),9,L))),256))],544),[[w,r.value]])]),o("ul",O,[(l(!0),a(m,null,x(n.filtres,s=>(l(),a("li",F,[o("input",{name:"cat",id:"cat-"+s.id,onClick:c=>t(s.id),class:"position-absolute top-0 bottom-0 left-0 right-0 w-100 h-100",type:"radio",value:"all"},null,8,M),o("label",T,g(s.nom),1)]))),256))])],64))}},D=["href"],E=o("b",{class:"d-block position-absolute top-0 bottom-0 left-0 right-0 bg-img-bgcolor-primary-0 bg-img-bgcolor-hover-primary-55 bg-img-transition-bgcolor"},null,-1),q=o("span",{class:"text-white shadow-text-sm m-auto bg-img-opacity-0 bg-img-opacity-hover-1 transition-opacity d-block align-self-center z-10 ff-semibold fs-short-2"}," Lire plus ",-1),H=[E,q],R={class:"col py-18px pl-28px pr-14px text-left lh-0 px-lg-16px"},P=["innerHTML"],U={class:"text-primary"},G={props:{offre:Object,index:Number,key:String},setup(p){const e=p,n=["object-card oc-new col-md-6 px-md-4px col-lg-4 px-lg-8px","object-card oc-new pt-8px pt-md-0 col-md-6 px-md-4px col-lg-4 px-lg-8px","object-card oc-new pt-8px pt-lg-0 col-md-6 px-md-4px col-lg-4 px-lg-8px","object-card oc-new pt-8px col-md-6 px-md-4px col-lg-4 pt-lg-16px px-lg-8px"];let r="bg-img-enjoy-1",t="";i(null);const d=k(()=>(e.offre.image&&(t={backgroundImage:`url(${e.offre.image})`,backgroundSize:"cover",backgroundPosition:"center"},r=""),t));function f(){return e.offre.description==null?!1:e.offre.description.length!==0}return(u,s)=>(l(),a("li",{class:h(n[e.key]?n[e.key]:n[3])},[o("a",{href:e.offre.url,class:"bg-img rounded-xs"},[o("i",{style:$(b(d)),class:h(b(r)+" bg-img-size-hover-110")},H,6),o("div",R,[o("h3",null,g(e.offre.nom),1),f?(l(),a("p",{key:0,innerHTML:e.offre.description?e.offre.description.slice(0,170):""},null,8,P)):j("",!0),o("span",U,g(e.offre.tags.join(",")),1)])],8,D)],2))}},J={class:"pt-24px pt-md-32px d-md-flex flex-md-wrap mx-md-n4px mx-lg-n8px object-cardsList mw-1440px"},K={props:{offres:Array},setup(p){return(e,n)=>(l(),a("ul",J,[(l(!0),a(m,null,x(p.offres,(r,t)=>(l(),z(G,{offre:r,index:t,key:r.id},null,8,["offre","index"]))),128))]))}},Q={setup(p){const e="app-offres",n=i([]),r=i([]),t=i(0);i(0);const d=i("");async function f(){if(t.value>0){let c=[...(await I("",t.value)).data];c.unshift({id:0,nom:"Tout"}),n.value=c}}const u=async function(c){console.log("loadOffres cat"+t.value+" filtreid: "+c);let _=await C("",t.value,c);console.log(_.data),r.value=[..._.data]};return B(async()=>{d.value=document.getElementById("body").getAttribute("data-current-language"),t.value=Number(document.getElementById(e).getAttribute("data-category-id")),await f(),await u(0)}),(s,c)=>(l(),a(m,null,[y(V,{categoryId:t.value,language:d.value,filtres:n.value,onRefreshOffres:u},null,8,["categoryId","language","filtres"]),y(K,{offres:r.value},null,8,["offres"])],64))}};N(Q).mount("#app-offres");
