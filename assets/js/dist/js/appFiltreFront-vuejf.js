import{r as i,o as w,a as l,c,t as m,l as k,m as $,b as r,w as I,v as j,F as g,d as _,n as B,p as z,u as b,q as v,s as C,i as y,j as N,x as S,k as A}from"../assets/filtre-service.1189cbf5.js";const L={key:0,class:"mb-3"},O={props:{categoryId:Number,language:String},setup(p){const e=p,t=i(null),s=i(e.categoryId);async function o(){if(s.value>0){let a=await $(s.value);t.value=a.data}}function u(){return t==null?!1:t.description.length!==0}return w(async()=>{s.value=Number(document.getElementById("app-offres").getAttribute("data-category-id")),await o()}),(a,d)=>u?(l(),c("p",L,m(t.value?t.value.description:""),1)):k("",!0)}},D={class:"d-md-none pr-12px border border-primary rounded-xs position-relative"},E=r("i",{class:"fas fa-angle-down position-absolute top-0 bottom-0 right-0 mr-16px fs-big-1 text-primary py-5px"},null,-1),F=["value"],M={class:"cat-filters d-md-flex mw-648px flex-wrap justify-content-center align-items-center d-none"},T={class:"mx-16px position-relative"},V=["id","onClick"],q={for:"cat-all",class:"py-4px px-8px fs-short-2 ff-semibold transition-color"},H={props:{filtres:Array,categoryId:Number,language:String},emits:["refresh-offres"],setup(p,{emit:e}){const t=p,s=i(0);function o(a){console.log(a),e("refresh-offres",a)}function u(){e("refresh-offres",filtreId)}return(a,d)=>(l(),c(g,null,[r("div",D,[E,I(r("select",{"onUpdate:modelValue":d[0]||(d[0]=n=>s.value=n),onChange:u,name:"categories",id:"cat-select",class:"fs-short-3 ff-semibold rounded-xs"},[(l(!0),c(g,null,_(t.filtres,n=>(l(),c("option",{value:n.id},m(n.nom),9,F))),256))],544),[[j,s.value]])]),r("ul",M,[(l(!0),c(g,null,_(t.filtres,n=>(l(),c("li",T,[r("input",{name:"cat",id:"cat-"+n.id,onClick:x=>o(n.id),class:"position-absolute top-0 bottom-0 left-0 right-0 w-100 h-100",type:"radio",value:"all"},null,8,V),r("label",q,m(n.nom),1)]))),256))])],64))}},R=["href"],P=r("b",{class:"d-block position-absolute top-0 bottom-0 left-0 right-0 bg-img-bgcolor-primary-0 bg-img-bgcolor-hover-primary-55 bg-img-transition-bgcolor"},null,-1),U=r("span",{class:"text-white shadow-text-sm m-auto bg-img-opacity-0 bg-img-opacity-hover-1 transition-opacity d-block align-self-center z-10 ff-semibold fs-short-2"}," Lire plus ",-1),G=[P,U],J={class:"col py-18px pl-28px pr-14px text-left lh-0 px-lg-16px"},K=["innerHTML"],Q={class:"text-primary"},W={props:{offre:Object,index:Number,key:String},setup(p){const e=p,t=["object-card oc-new col-md-6 px-md-4px col-lg-4 px-lg-8px","object-card oc-new pt-8px pt-md-0 col-md-6 px-md-4px col-lg-4 px-lg-8px","object-card oc-new pt-8px pt-lg-0 col-md-6 px-md-4px col-lg-4 px-lg-8px","object-card oc-new pt-8px col-md-6 px-md-4px col-lg-4 pt-lg-16px px-lg-8px"];let s="bg-img-enjoy-1",o="";i(null);const u=B(()=>(e.offre.image&&(o={backgroundImage:`url(${e.offre.image})`,backgroundSize:"cover",backgroundPosition:"center"},s=""),o));function a(){return e.offre.description==null?!1:e.offre.description.length!==0}return(d,n)=>(l(),c("li",{class:v(t[e.key]?t[e.key]:t[3])},[r("a",{href:e.offre.url,class:"bg-img rounded-xs"},[r("i",{style:z(b(u)),class:v(b(s)+" bg-img-size-hover-110")},G,6),r("div",J,[r("h3",null,m(e.offre.nom),1),a?(l(),c("p",{key:0,innerHTML:e.offre.description?e.offre.description.slice(0,170):""},null,8,K)):k("",!0),r("span",Q,m(e.offre.tags.join(",")),1)])],8,R)],2))}},X={class:"pt-24px pt-md-32px d-md-flex flex-md-wrap mx-md-n4px mx-lg-n8px object-cardsList mw-1440px"},Y={props:{offres:Array},setup(p){return(e,t)=>(l(),c("ul",X,[(l(!0),c(g,null,_(p.offres,(s,o)=>(l(),C(W,{offre:s,index:o,key:s.id},null,8,["offre","index"]))),128))]))}},Z={setup(p){const e="app-offres",t=i([]),s=i([]),o=i(0),u=i(0),a=i("");async function d(){if(o.value>0){let f=[...(await N("",o.value)).data];f.unshift({id:0,nom:"Tout"}),t.value=f}}const n=async function(f){console.log("refresh offres"+f),console.log("loadOffres cat"+o.value+" filtreid: "+u);let h=await S("",o.value,f);console.log(h.data),s.value=[...h.data]};return w(async()=>{a.value=document.getElementById("body").getAttribute("data-current-language"),o.value=Number(document.getElementById(e).getAttribute("data-category-id")),await d(),await n(0)}),(x,f)=>(l(),c(g,null,[y(O,{categoryId:o.value,language:a.value},null,8,["categoryId","language"]),y(H,{categoryId:o.value,language:a.value,filtres:t.value,onRefreshOffres:n},null,8,["categoryId","language","filtres"]),y(Y,{offres:s.value},null,8,["offres"])],64))}};A(Z).mount("#app-offres");
