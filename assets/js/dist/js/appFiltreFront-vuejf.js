import{r as d,a as o,c as l,b as n,w,v as $,F as m,d as x,t as _,l as L,n as j,u as v,m as k,p as h,q as y,o as z,i as B,j as I,s as C,k as N}from"../assets/filtre-service.5e385e4c.js";const O={class:"d-md-none pr-12px border border-primary rounded-xs position-relative"},S=n("i",{class:"fas fa-angle-down position-absolute top-0 bottom-0 right-0 mr-16px fs-big-1 text-primary py-5px"},null,-1),A=["value"],F={class:"cat-filters d-md-flex mw-648px flex-wrap justify-content-center align-items-center d-none"},M={class:"mx-16px position-relative"},T=["id","onClick"],V={for:"cat-all",class:"py-4px px-8px fs-short-2 ff-semibold transition-color"},D={props:{filtres:Array,categoryId:Number,language:String},emits:["refresh-offres"],setup(c,{emit:e}){const s=c,r=d(0);function t(i){e("refresh-offres",i)}function p(){e("refresh-offres",filtreId)}return(i,u)=>(o(),l(m,null,[n("div",O,[S,w(n("select",{"onUpdate:modelValue":u[0]||(u[0]=a=>r.value=a),onChange:p,name:"categories",id:"cat-select",class:"fs-short-3 ff-semibold rounded-xs"},[(o(!0),l(m,null,x(s.filtres,a=>(o(),l("option",{value:a.id},_(a.nom),9,A))),256))],544),[[$,r.value]])]),n("ul",F,[(o(!0),l(m,null,x(s.filtres,a=>(o(),l("li",M,[n("input",{name:"cat",id:"cat-"+a.id,onClick:g=>t(a.id),class:"position-absolute top-0 bottom-0 left-0 right-0 w-100 h-100",type:"radio",value:"all"},null,8,T),n("label",V,_(a.nom),1)]))),256))])],64))}},E=["href"],q=n("b",{class:"d-block position-absolute top-0 bottom-0 left-0 right-0 bg-img-bgcolor-primary-0 bg-img-bgcolor-hover-primary-55 bg-img-transition-bgcolor"},null,-1),H=n("span",{class:"text-white shadow-text-sm m-auto bg-img-opacity-0 bg-img-opacity-hover-1 transition-opacity d-block align-self-center z-10 ff-semibold fs-short-2"}," Lire plus ",-1),R=[q,H],P={class:"col py-18px pl-28px pr-14px text-left lh-0 px-lg-16px"},U=["innerHTML"],G={class:"text-primary"},J={props:{offre:Object,index:Number,key:String},setup(c){const e=c,s=["object-card oc-new col-md-6 px-md-4px col-lg-4 px-lg-8px","object-card oc-new pt-8px pt-md-0 col-md-6 px-md-4px col-lg-4 px-lg-8px","object-card oc-new pt-8px pt-lg-0 col-md-6 px-md-4px col-lg-4 px-lg-8px","object-card oc-new pt-8px col-md-6 px-md-4px col-lg-4 pt-lg-16px px-lg-8px"];let r="bg-img-enjoy-1",t="";d(null);const p=L(()=>(e.offre.image&&(t={backgroundImage:`url(${e.offre.image})`,backgroundSize:"cover",backgroundPosition:"center"},r=""),t));function i(){return e.offre.description==null?!1:e.offre.description.length!==0}return(u,a)=>(o(),l("li",{class:k(s[e.key]?s[e.key]:s[3])},[n("a",{href:e.offre.url,class:"bg-img rounded-xs"},[n("i",{style:j(v(p)),class:k(v(r)+" bg-img-size-hover-110")},R,6),n("div",P,[n("h3",null,_(e.offre.nom),1),i?(o(),l("p",{key:0,innerHTML:e.offre.description?e.offre.description.slice(0,170):""},null,8,U)):h("",!0),n("span",G,_(e.offre.tags.join(",")),1)])],8,E)],2))}},K={class:"pt-24px pt-md-32px d-md-flex flex-md-wrap mx-md-n4px mx-lg-n8px object-cardsList mw-1440px"},Q={props:{offres:Array},setup(c){return(e,s)=>(o(),l("ul",K,[(o(!0),l(m,null,x(c.offres,(r,t)=>(o(),y(J,{offre:r,index:t,key:r.id},null,8,["offre","index"]))),128))]))}};var W=(c,e)=>{const s=c.__vccOpts||c;for(const[r,t]of e)s[r]=t;return s};const X={},Y={class:"myLoad"};function Z(c,e){return o(),l("div",Y," Loading... ")}var ee=W(X,[["render",Z]]);const te={setup(c){const e="app-offres",s=d([]),r=d([]),t=d(0);d(0);const p=d(""),i=d(!0);async function u(){if(t.value>0){let f=[...(await I("",t.value,1)).data];f.unshift({id:0,nom:"Tout"}),s.value=f}}const a=async function(f){console.log("loadOffres cat"+t.value+" filtreid: "+f);let b=await C("",t.value,f);console.log(b.data),r.value=[...b.data]};return z(async()=>{try{p.value=document.getElementById("body").getAttribute("data-current-language"),t.value=Number(document.getElementById(e).getAttribute("data-category-id")),await u(),await a(0)}catch(g){console.log(g)}finally{i.value=!1}}),(g,f)=>(o(),l(m,null,[B(D,{categoryId:t.value,language:p.value,filtres:s.value,onRefreshOffres:a},null,8,["categoryId","language","filtres"]),i.value===!0?(o(),y(ee,{key:0,isLoading:i.value},null,8,["isLoading"])):h("",!0),i.value===!1?(o(),y(Q,{key:1,offres:r.value},null,8,["offres"])):h("",!0)],64))}};N(te).mount("#app-offres");
